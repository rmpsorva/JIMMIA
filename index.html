<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tragamonedas Solana - Jimmy-A vs Super Mario</title>
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff00ff;
            --neon-green: #39ff14;
            --neon-yellow: #ffff00;
            --dark-bg: #0a0a1f;
            --panel-bg: rgba(16, 16, 48, 0.8);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--dark-bg);
            color: white;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(28, 28, 80, 0.7) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(40, 40, 100, 0.7) 0%, transparent 20%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--neon-blue);
            position: relative;
        }
        
        .logo {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-bottom: 20px;
        }
        
        .character {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px;
            box-shadow: 0 0 15px currentColor;
            position: relative;
            overflow: hidden;
        }
        
        .jimmy {
            background: linear-gradient(135deg, #1a1a5e, #0a0a2e);
            color: var(--neon-blue);
            border: 3px solid var(--neon-blue);
        }
        
        .mario {
            background: linear-gradient(135deg, #5e1a1a, #2e0a0a);
            color: var(--neon-yellow);
            border: 3px solid var(--neon-yellow);
        }
        
        .vs {
            font-size: 30px;
            font-weight: bold;
            color: var(--neon-pink);
            text-shadow: 0 0 10px var(--neon-pink);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #aaa;
            margin-bottom: 20px;
        }
        
        .game-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .game-container {
                grid-template-columns: 1fr;
            }
        }
        
        .slot-machine {
            background: var(--panel-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
            border: 1px solid var(--neon-blue);
        }
        
        .reels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            gap: 10px;
        }
        
        .reel {
            width: 100%;
            height: 150px;
            background: rgba(10, 10, 40, 0.8);
            border: 2px solid var(--neon-blue);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 60px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .reel-content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 500%;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: top 3s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        
        .reel-item {
            height: 20%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }
        
        .spin-btn {
            background: linear-gradient(135deg, var(--neon-blue), #0066ff);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 0 15px var(--neon-blue);
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .spin-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--neon-blue);
        }
        
        .spin-btn:disabled {
            background: #555;
            box-shadow: none;
            cursor: not-allowed;
            transform: none;
        }
        
        .bet-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .bet-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--neon-green);
            background: transparent;
            color: var(--neon-green);
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .bet-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--neon-green);
            min-width: 60px;
            text-align: center;
        }
        
        .info-panel {
            background: var(--panel-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
            border: 1px solid var(--neon-pink);
        }
        
        .balance {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .balance h3 {
            color: var(--neon-blue);
            margin-bottom: 10px;
        }
        
        .token-balance {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .token-name {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .jimmy-token {
            color: var(--neon-blue);
        }
        
        .mario-token {
            color: var(--neon-yellow);
        }
        
        .win-history {
            margin-bottom: 20px;
        }
        
        .win-history h3 {
            color: var(--neon-pink);
            margin-bottom: 10px;
        }
        
        .history-list {
            max-height: 200px;
            overflow-y: auto;
        }
        
        .history-item {
            padding: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
        }
        
        .win {
            color: var(--neon-green);
        }
        
        .loss {
            color: #ff5555;
        }
        
        .rules {
            margin-top: 20px;
        }
        
        .rules h3 {
            color: var(--neon-green);
            margin-bottom: 10px;
        }
        
        .rules ul {
            padding-left: 20px;
            font-size: 0.9rem;
            color: #ccc;
        }
        
        .rules li {
            margin-bottom: 8px;
        }
        
        .result-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .result-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .result-content {
            background: var(--panel-bg);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 0 30px var(--neon-pink);
            border: 2px solid var(--neon-pink);
            transform: scale(0.8);
            transition: transform 0.3s;
        }
        
        .result-modal.active .result-content {
            transform: scale(1);
        }
        
        .result-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--neon-yellow);
        }
        
        .result-amount {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: var(--neon-green);
            text-shadow: 0 0 10px var(--neon-green);
        }
        
        .close-result {
            background: var(--neon-pink);
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
        }
        
        .jackpot {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-size: 5rem;
            font-weight: bold;
            color: var(--neon-yellow);
            text-shadow: 0 0 20px var(--neon-yellow);
            z-index: 10;
            opacity: 0;
            transition: all 0.5s;
        }
        
        .jackpot.active {
            animation: jackpot-animation 2s forwards;
        }
        
        @keyframes jackpot-animation {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }
        
        footer {
            text-align: center;
            padding: 20px 0;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .symbol-jimmy { color: var(--neon-blue); }
        .symbol-mario { color: var(--neon-yellow); }
        .symbol-solana { color: var(--neon-green); }
        .symbol-camaro { color: #ff5555; }
        .symbol-seven { color: var(--neon-pink); }
        .symbol-cherry { color: #ff9999); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="character jimmy">J</div>
                <div class="vs">VS</div>
                <div class="character mario">M</div>
            </div>
            <h1>TRAGAMONEDAS SOLANA</h1>
            <div class="subtitle">La Batalla por el Casino Municipal de Solana</div>
        </header>
        
        <div class="game-container">
            <div class="slot-machine">
                <div class="reels">
                    <div class="reel" id="reel1">
                        <div class="reel-content" id="reelContent1">
                            <!-- Los s√≠mbolos se generar√°n con JavaScript -->
                        </div>
                    </div>
                    <div class="reel" id="reel2">
                        <div class="reel-content" id="reelContent2">
                            <!-- Los s√≠mbolos se generar√°n con JavaScript -->
                        </div>
                    </div>
                    <div class="reel" id="reel3">
                        <div class="reel-content" id="reelContent3">
                            <!-- Los s√≠mbolos se generar√°n con JavaScript -->
                        </div>
                    </div>
                </div>
                
                <div class="controls">
                    <div class="bet-controls">
                        <button class="bet-btn" id="decreaseBet">-</button>
                        <div class="bet-display" id="currentBet">10</div>
                        <button class="bet-btn" id="increaseBet">+</button>
                        <span style="margin-left: 10px; color: var(--neon-green);">JIMMYA</span>
                    </div>
                    
                    <button class="spin-btn" id="spinButton">GIRAR</button>
                </div>
            </div>
            
            <div class="info-panel">
                <div class="balance">
                    <h3>TUS FONDOS</h3>
                    <div class="token-balance">
                        <div class="token-name jimmy-token">
                            <span>JIMMYA</span>
                        </div>
                        <div id="jimmyBalance">1000</div>
                    </div>
                    <div class="token-balance">
                        <div class="token-name mario-token">
                            <span>SUPERMARIO</span>
                        </div>
                        <div id="marioBalance">0</div>
                    </div>
                </div>
                
                <div class="win-history">
                    <h3>HISTORIAL</h3>
                    <div class="history-list" id="historyList">
                        <!-- El historial se generar√° con JavaScript -->
                    </div>
                </div>
                
                <div class="rules">
                    <h3>REGLAS DEL JUEGO</h3>
                    <ul>
                        <li>Apuesta tokens JIMMYA para girar los carretes</li>
                        <li>Gana tokens SUPERMARIO seg√∫n las combinaciones</li>
                        <li>3 s√≠mbolos iguales = Premio mayor</li>
                        <li>2 s√≠mbolos iguales = Premio menor</li>
                        <li>¬°3 s√≠mbolos Siete = JACKPOT!</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="result-modal" id="resultModal">
            <div class="result-content">
                <h2 class="result-title" id="resultTitle">¬°GANASTE!</h2>
                <div class="result-amount" id="resultAmount">+500 SUPERMARIO</div>
                <button class="close-result" id="closeResult">CONTINUAR</button>
            </div>
        </div>
        
        <div class="jackpot" id="jackpotAnimation">¬°JACKPOT!</div>
        
        <footer>
            <p>TRAGAMONEDAS SOLANA - Jimmy-A vs Super Mario | Este es un juego de demostraci√≥n</p>
        </footer>
    </div>

    <script>
        // Configuraci√≥n del juego
        const symbols = [
            { id: 'jimmy', name: 'Jimmy-A', multiplier: 3, class: 'symbol-jimmy', display: 'J' },
            { id: 'mario', name: 'Super Mario', multiplier: 3, class: 'symbol-mario', display: 'M' },
            { id: 'solana', name: 'Solana', multiplier: 2, class: 'symbol-solana', display: 'S' },
            { id: 'camaro', name: 'Camaro', multiplier: 2, class: 'symbol-camaro', display: 'C' },
            { id: 'seven', name: 'Siete', multiplier: 5, class: 'symbol-seven', display: '7' },
            { id: 'cherry', name: 'Cereza', multiplier: 1.5, class: 'symbol-cherry', display: 'üçí' }
        ];
        
        // Estado del juego
        let gameState = {
            jimmyBalance: 1000,
            marioBalance: 0,
            currentBet: 10,
            isSpinning: false,
            winHistory: []
        };
        
        // Elementos DOM
        const reelContents = [
            document.getElementById('reelContent1'),
            document.getElementById('reelContent2'),
            document.getElementById('reelContent3')
        ];
        
        const spinButton = document.getElementById('spinButton');
        const decreaseBetButton = document.getElementById('decreaseBet');
        const increaseBetButton = document.getElementById('increaseBet');
        const currentBetDisplay = document.getElementById('currentBet');
        const jimmyBalanceDisplay = document.getElementById('jimmyBalance');
        const marioBalanceDisplay = document.getElementById('marioBalance');
        const historyList = document.getElementById('historyList');
        const resultModal = document.getElementById('resultModal');
        const resultTitle = document.getElementById('resultTitle');
        const resultAmount = document.getElementById('resultAmount');
        const closeResultButton = document.getElementById('closeResult');
        const jackpotAnimation = document.getElementById('jackpotAnimation');
        
        // Inicializar el juego
        function initGame() {
            // Inicializar carretes con s√≠mbolos
            reelContents.forEach(reelContent => {
                // Limpiar contenido existente
                reelContent.innerHTML = '';
                
                // A√±adir 10 s√≠mbolos (5 visibles + 5 extra para el efecto de giro)
                for (let i = 0; i < 10; i++) {
                    const randomSymbol = symbols[Math.floor(Math.random() * symbols.length)];
                    const symbolElement = document.createElement('div');
                    symbolElement.className = `reel-item ${randomSymbol.class}`;
                    symbolElement.textContent = randomSymbol.display;
                    symbolElement.dataset.symbol = randomSymbol.id;
                    reelContent.appendChild(symbolElement);
                }
                
                // Posicionar el carrete para mostrar un s√≠mbolo aleatorio al inicio
                const randomPosition = Math.floor(Math.random() * 5) * 20;
                reelContent.style.top = `-${randomPosition}%`;
            });
            
            // Actualizar la UI
            updateUI();
            
            // Configurar event listeners
            spinButton.addEventListener('click', spinReels);
            decreaseBetButton.addEventListener('click', () => changeBet(-10));
            increaseBetButton.addEventListener('click', () => changeBet(10));
            closeResultButton.addEventListener('click', closeResultModal);
        }
        
        // Cambiar la apuesta
        function changeBet(amount) {
            const newBet = gameState.currentBet + amount;
            
            // Validar l√≠mites de apuesta
            if (newBet >= 10 && newBet <= 100 && newBet <= gameState.jimmyBalance) {
                gameState.currentBet = newBet;
                currentBetDisplay.textContent = gameState.currentBet;
            }
        }
        
        // Girar los carretes
        function spinReels() {
            if (gameState.isSpinning || gameState.jimmyBalance < gameState.currentBet) return;
            
            // Restar la apuesta del balance
            gameState.jimmyBalance -= gameState.currentBet;
            gameState.isSpinning = true;
            spinButton.disabled = true;
            
            // Efecto de giro para cada carrete
            const spinPromises = reelContents.map((reelContent, index) => {
                return new Promise(resolve => {
                    // Duraci√≥n aleatoria para cada carrete (entre 2 y 4 segundos)
                    const spinDuration = 2000 + Math.random() * 2000 + index * 500;
                    
                    // Calcular nueva posici√≥n (m√∫ltiplo de 20%)
                    const currentPosition = parseInt(reelContent.style.top || '0');
                    const spins = 5 + Math.floor(Math.random() * 3); // 5-7 giros completos
                    const newPosition = currentPosition + (spins * 100) + (Math.floor(Math.random() * 5) * 20);
                    
                    // Aplicar la animaci√≥n
                    reelContent.style.transition = `top ${spinDuration}ms cubic-bezier(0.2, 0.8, 0.2, 1)`;
                    reelContent.style.top = `-${newPosition}%`;
                    
                    // Resolver cuando termine la animaci√≥n
                    setTimeout(() => {
                        // Ajustar la posici√≥n para que sea un m√∫ltiplo exacto de 20%
                        const finalPosition = newPosition % 100;
                        reelContent.style.transition = 'none';
                        reelContent.style.top = `-${finalPosition}%`;
                        resolve();
                    }, spinDuration);
                });
            });
            
            // Cuando todos los carretes hayan terminado
            Promise.all(spinPromises).then(() => {
                gameState.isSpinning = false;
                spinButton.disabled = false;
                
                // Verificar resultado
                checkResult();
            });
        }
        
        // Verificar el resultado del giro
        function checkResult() {
            // Obtener s√≠mbolos actuales de cada carrete
            const currentSymbols = reelContents.map(reelContent => {
                const position = parseInt(reelContent.style.top) / 20;
                const symbolElement = reelContent.children[Math.abs(position) % reelContent.children.length];
                return symbolElement.dataset.symbol;
            });
            
            // Contar s√≠mbolos iguales
            const symbolCounts = {};
            currentSymbols.forEach(symbol => {
                symbolCounts[symbol] = (symbolCounts[symbol] || 0) + 1;
            });
            
            // Calcular ganancias
            let winAmount = 0;
            let winType = 'loss';
            
            // Verificar si hay 3 s√≠mbolos iguales
            for (const symbol in symbolCounts) {
                if (symbolCounts[symbol] === 3) {
                    const symbolData = symbols.find(s => s.id === symbol);
                    winAmount = gameState.currentBet * symbolData.multiplier * 10;
                    winType = symbol === 'seven' ? 'jackpot' : 'bigwin';
                    break;
                }
            }
            
            // Si no hay 3 iguales, verificar 2 iguales
            if (winAmount === 0) {
                for (const symbol in symbolCounts) {
                    if (symbolCounts[symbol] === 2) {
                        const symbolData = symbols.find(s => s.id === symbol);
                        winAmount = gameState.currentBet * symbolData.multiplier;
                        winType = 'smallwin';
                        break;
                    }
                }
            }
            
            // Actualizar balances y mostrar resultado
            if (winAmount > 0) {
                gameState.marioBalance += winAmount;
                
                // Mostrar animaci√≥n de jackpot si corresponde
                if (winType === 'jackpot') {
                    jackpotAnimation.classList.add('active');
                    setTimeout(() => {
                        jackpotAnimation.classList.remove('active');
                    }, 2000);
                }
            }
            
            // A√±adir al historial
            const historyEntry = {
                type: winType,
                amount: winAmount,
                bet: gameState.currentBet,
                timestamp: new Date().toLocaleTimeString()
            };
            
            gameState.winHistory.unshift(historyEntry);
            
            // Limitar el historial a 10 entradas
            if (gameState.winHistory.length > 10) {
                gameState.winHistory.pop();
            }
            
            // Actualizar UI
            updateUI();
            
            // Mostrar resultado
            showResult(winType, winAmount);
        }
        
        // Mostrar resultado
        function showResult(type, amount) {
            switch(type) {
                case 'jackpot':
                    resultTitle.textContent = '¬°JACKPOT!';
                    resultTitle.style.color = 'var(--neon-yellow)';
                    resultAmount.textContent = `+${amount} SUPERMARIO`;
                    break;
                case 'bigwin':
                    resultTitle.textContent = '¬°GRAN PREMIO!';
                    resultTitle.style.color = 'var(--neon-green)';
                    resultAmount.textContent = `+${amount} SUPERMARIO`;
                    break;
                case 'smallwin':
                    resultTitle.textContent = '¬°GANASTE!';
                    resultTitle.style.color = 'var(--neon-blue)';
                    resultAmount.textContent = `+${amount} SUPERMARIO`;
                    break;
                default:
                    resultTitle.textContent = '¬°SIGUE INTENTANDO!';
                    resultTitle.style.color = 'var(--neon-pink)';
                    resultAmount.textContent = `0 SUPERMARIO`;
            }
            
            resultModal.classList.add('active');
        }
        
        // Cerrar modal de resultado
        function closeResultModal() {
            resultModal.classList.remove('active');
        }
        
        // Actualizar la interfaz de usuario
        function updateUI() {
            jimmyBalanceDisplay.textContent = gameState.jimmyBalance;
            marioBalanceDisplay.textContent = gameState.marioBalance;
            currentBetDisplay.textContent = gameState.currentBet;
            
            // Actualizar historial
            historyList.innerHTML = '';
            gameState.winHistory.forEach(entry => {
                const historyItem = document.createElement('div');
                historyItem.className = `history-item ${entry.type !== 'loss' ? 'win' : 'loss'}`;
                
                let resultText = '';
                if (entry.type === 'loss') {
                    resultText = `P√©rdida: -${entry.bet} JIMMYA`;
                } else {
                    resultText = `Ganancia: +${entry.amount} SUPERMARIO`;
                }
                
                historyItem.innerHTML = `
                    <span>${entry.timestamp}</span>
                    <span>${resultText}</span>
                `;
                
                historyList.appendChild(historyItem);
            });
            
            // Habilitar/deshabilitar botones seg√∫n el balance
            decreaseBetButton.disabled = gameState.currentBet <= 10;
            increaseBetButton.disabled = gameState.currentBet >= 100 || gameState.currentBet >= gameState.jimmyBalance;
            spinButton.disabled = gameState.jimmyBalance < gameState.currentBet;
        }
        
        // Inicializar el juego cuando se carga la p√°gina
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
